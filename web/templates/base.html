<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Cat Motion{% endblock %}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{{ url_for('static', path='styles.css') }}" />
  </head>
  <body>
    <div class="page-shell">
      <header class="site-header">
        <div class="header-inner">
          <a class="logo" href="/">Cat Motion</a>
          <button class="nav-toggle" type="button" aria-label="Toggle navigation">
            <span></span>
            <span></span>
            <span></span>
          </button>
          <nav class="nav-links">
            <a class="{% if active_page == 'dashboard' %}is-active{% endif %}" href="/">Dashboard</a>
            <a class="{% if active_page == 'clips' %}is-active{% endif %}" href="/clips">Clips</a>
            <a class="{% if active_page == 'unlabeled' %}is-active{% endif %}" href="/unlabeled">Unlabeled</a>
            <a class="{% if active_page == 'training' %}is-active{% endif %}" href="/training">Training</a>
          </nav>
          {% if request.state.user %}
          <div class="user-actions">
            <span class="user-chip">{{ request.state.user }}</span>
            <form class="logout-form" method="post" action="/logout">
              <button type="submit">Log out</button>
            </form>
          </div>
          {% endif %}
        </div>
      </header>
      <main class="page-container">
        {% block content %}{% endblock %}
      </main>
      <footer class="site-footer">
        <small>Running on Raspberry Pi</small>
      </footer>
    </div>
    <script>
      const navToggle = document.querySelector(".nav-toggle");
      const navLinks = document.querySelector(".nav-links");
      if (navToggle && navLinks) {
        navToggle.addEventListener("click", () => {
          navLinks.classList.toggle("open");
          navToggle.classList.toggle("open");
        });
        navLinks.querySelectorAll("a").forEach((link) => {
          link.addEventListener("click", () => {
            navLinks.classList.remove("open");
            navToggle.classList.remove("open");
          });
        });
      }
    </script>
  </body>
</html>
